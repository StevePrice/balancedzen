<template name="manage">

  <div class="manage-users row">
    <div class="offset4 span8">

      <p class="note">Only Admins and those with the 'manage-users' role will see this page in their nav menu.</p>

      <h2>Manage Users</h2>

      <br />

      <h3>Current Users</h3>
      <ul>
      {{#each users}}
      <li>{{email}} - Roles: {{roles}}</li>
      {{/each}}
      </ul>
      <hr>
{{!-- > securityNote --}}
    </div>
  </div>
</template>

<template name="securityNote">
  <div class="security-note">
    <p>SECURITY NOTE: It is important to distinguish between templates and data since, like all Meteor applications, every template is sent to all connected clients whereas data can be selectively published server-side.</p>
    <p>This is currently how Meteor is designed to work and is not a problem as long as you are aware that the raw template content is not actually 'secure'. Anyone can see any template by manually looking through the bundled client.js file. It won't be very pretty but it is possible. So for now don't put sensitive information in templates!</p>
    <p>You can see this in action by manually going to '/secrets'.  Unauthorized users will still be able to see the page but the secret data will not be displayed.  In a production system, you should add a Roles check to your Router's definition of the 'secrets' route but even then the raw template data is still sent to the user's browser.</p>
    <p>There is a <a href="https://trello.com/c/Lz07fBAm" target="_blank">feature card</a> on the Meteor team's Road Map which covers both server-side rendering and serving templates on-demand to the client so once that lands, the security restrictions may not need to be so tight.</p>
    <p>Sensitive data needs to be restricted on the server-side and only published to the client if the currently logged-in user has the proper permissions. See server.js for an example.</p>
    <p>To test server-side publishing rules, in your browser console try, 'Meteor.secrets.findOne()'. Unauthorized users will see 'undefined'.</p>
  </div>
</template>